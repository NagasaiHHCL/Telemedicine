<app-navbar></app-navbar>
<div *ngIf="service.isLoading$ | async">Loading...</div>

<div class="container-fluid p-4" style="background-color: #F8F9FA;">

  <div class="container" style="display: flex;justify-content: space-between;">
    <h3 class="doctorp">Doctors</h3>
    <button class="downloadbtn btn-lg" [disabled]="!hasData" (click)="exportexcel()">Download</button>

  </div>




<div class="container p-1 mt-3 tabledata">
  <!-- <form [formGroup]="submitForm"  ngSubmit="getDoctors()"> -->

<div class="container">
  <div class="row">
    <div class="col-md-2">
      <div class="mt-3">
        <h5 class="doctorlist">Doctors List </h5>
        <h5 class="docount">{{data.length}} Doctor's</h5>
      </div>
      </div>
  <div class="col-md-3">
    <div class="mt-2">
      <input type="search" (click)="removeImage()" [(ngModel)]="searchTerm" (ngModelChange)="applySearchFilter()"  name="" class="form-control inputfields" placeholder="         Doctor name"
        id="">
      <img *ngIf="showImage" src="../../assets/images/search 1 (1).svg" class="searchicon" alt="">

   
  </div>
  </div>

  <div class="col-md-7">
  <div class="row">
    <div class="col-md-6">
    <div class="row">
      <div class="col-md-5">
        <div class="mt-2">
      <div class="custom-select">

        <select class="form-select form-control inputfield mr-3" [(ngModel)]="selectedStatus" (change)="filterData()"   aria-label="Default select example">
          <option class="option" value="all" selected>Status</option>
          <option class="option" value="Active" selected>Active</option>

          <option class="option" value="Inactive" selected>Inactive</option>

        </select>  
      </div>
        <!-- <h6 class="sortby mt-4"> Sort By :</h6> -->
       </div>
      </div>
      <div class="col-md-7">
        <div class="mt-2">
      <div class="custom-select" data-toggle="tooltip" data-placement="bottom" title="Tooltip on left">

          <select class="form-select form-control inputfield mr-1" [(ngModel)]="selectspl" (click)="getdoctorspecial()"  aria-label="Default select example">
            <option class="option" value="0" selected>Specialization</option>
            <option *ngFor="let data of spldata; let i=index" value="{{data.DEPT_ID}}">{{data.DEPT_NAME}}</option>
          </select>  
        </div>
      </div>
      </div>
    </div>
    </div>
    <div class="col-md-3">
      <div class="mt-2">
      <div class="custom-select" data-toggle="tooltip" data-placement="bottom" title="Tooltip on left">

        <select class="form-select form-control mr-3 inputfield" [(ngModel)]="selectedOption"  (change)="handleSelectionChange()"     aria-label="Default select example">
          <option  class="option" value="" selected>State</option>
          <option *ngFor="let data of statedata; let i=index"  value={{data.locationid}}>{{data.locationname}}</option>  
        </select>
        </div>
      </div>
    </div>
    <div class= "col-md-3">
      <div class="mt-2">
      <div class="custom-select" >
         
      <select class="form-select form-control mr-3 inputfield" [(ngModel)]="selectedCity" (click)="getDoctors()"  aria-label="Default select example">
        <option  class="option" value="" selected>City</option>
  
        <option *ngFor="let data of citydata; let i=index" value={{data.locationname}}>{{data.locationname}}</option>
  
      </select>
     </div>
      </div>
    </div>
  </div> 
  </div>
  </div>
</div>
<!-- </form> -->
<div class="customtable mt-2" id="exceltable">
  <div *ngIf="this.data.length === 0">
    <h4 class="nodata">No data to Display</h4>
    </div>
  <div *ngIf="this.data.length !== 0">
  <table>
    <thead>
      <tr>
        <th>S.No</th>
<!-- <th>ID</th> -->
        <th>Doctor Name</th>
        <th>Specialization</th>
        <th>No.Patients</th>
        <th>No.Appointments</th>
        <th>State</th>
        <th>City</th>
<th>Status</th>
        <!-- <th>Area</th> -->

        <!-- <th>Referral Emp ID</th> -->
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of data; let i=index">
        <td>{{ i + 1 }}</td>
        <!-- <td>{{data.doctor_id}}</td> -->
        <td>{{data.doctor_name}}</td>
        <td>{{data.dept_name}}</td>
        <td>{{data.patients}}</td>
        <td>{{data.appointments}}</td>
        <td>{{data.state}}</td>
        <td>{{data.city}}</td>
<td>{{data.status}}</td>
        <!-- <td>{{data.area}}</td> -->

        <!-- <td>{{data.referralid}}</td> -->



        <td><a [routerLink]="['doctorprofile/{{data.doctor_id}}']" (click)="viewProfile(data.doctor_id)" ><img src="../../assets/images/eye.svg" class="eyeimg" alt=""></a></td>
      </tr>

    </tbody>
  </table>
  </div>
</div>


</div>

</div>